<div class="myblogs-container container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
    <h2 class="mb-0 fw-bold">All Blogs</h2>
    <div class="d-flex gap-2">
      <button mat-stroked-button [routerLink]="['/blog/my-blogs']">
        <mat-icon>list</mat-icon> My Blogs
      </button>
    </div>
  </div>

  <div class="row g-4" *ngIf="!loading">
    <ng-container *ngIf="blogs$ | async as blogs">
      <ng-container *ngFor="let blog of blogs">
        <div class="col-md-6 col-lg-4 d-flex" *ngIf="blog.isapproved.includes('approved') || isAdmin">
          <div class="card blog-card flex-fill shadow-sm border-0 d-flex flex-column">
            <div class="card-img-top blog-thumbnail">
              <img src="assets/images/placeholder.png" alt="Blog Image" class="img-fluid rounded-top blog-image">
            </div>

            <div class="card-body d-flex flex-column">
              <h5 class="card-title text-truncate" title="{{ blog.title }}">
                {{ blog.title }}
              </h5>

              <div class="mt-auto d-flex flex-wrap justify-content-between align-items-center gap-2">
                <div class="d-flex gap-1 align-items-center flex-wrap">
                  <button class="btn btn-sm btn-success" *ngIf="isAdmin && blog.isapproved !== 'approved'"
                    (click)="approveBlog(blog._id, blog.title, blog.content, blog.username)">
                    <mat-icon>check_circle</mat-icon>
                  </button>

                  <button class="btn btn-sm btn-danger"
                    *ngIf="isAdmin && blog.isapproved !== 'approved' && blog.isapproved !== 'rejected'"
                    (click)="rejectBlog(blog._id, blog.title, blog.content, blog.username)">
                    <mat-icon>cancel</mat-icon>
                  </button>

                  <span class="badge bg-danger" *ngIf="blog.isapproved === 'rejected'">Rejected</span>
                  <span class="badge bg-success" *ngIf="isAdmin && blog.isapproved === 'approved'">Approved</span>
                  <span class="badge bg-success" *ngIf="!isAdmin && blog.isapproved === 'approved'">{{ blog.createdAt ?? 'N/A' | date: 'short' }}</span>
                </div>

                <span class="text-muted small">
                  <mat-icon class="me-1" inline>person</mat-icon>
                  {{ blog.username }}
                </span>
              </div>

              <a class="btn btn-sm btn-outline-dark w-100 mt-3" [routerLink]="['/blog/read-blog', blog._id]">
                <mat-icon class="me-1" inline>menu_book</mat-icon> Read Blog
              </a>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>
  </div>

</div>